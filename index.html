<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base target="_self">
    <title>AniVerse | Votre portail vers le monde des animés</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@preline/preline@2.0.0/dist/preline.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .dark .skeleton {
            background: linear-gradient(90deg, #2d3748 25%, #4a5568 50%, #2d3748 75%);
            background-size: 200% 100%;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <!-- Navigation -->
    <header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex items-center" onclick="navigate(event, 'home')">
                        <span class="text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">AniVerse</span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium" onclick="navigate(event, 'home')">Accueil</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium" onclick="navigate(event, 'calendar')">Calendrier</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium" onclick="navigate(event, 'library')">Bibliothèque</a>
                    <a href="#" class="text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 font-medium" onclick="navigate(event, 'news')">Actualités</a>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>
                    <div class="relative">
                        <button id="search-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                            <i class="fas fa-search"></i>
                        </button>
                        <div id="search-dropdown" class="hidden absolute right-0 mt-2 w-72 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border border-gray-200 dark:border-gray-700">
                            <div class="p-3">
                                <input type="text" placeholder="Rechercher un animé..." class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500">
                            </div>
                        </div>
                    </div>
                    <button id="user-menu-button" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden fixed inset-0 z-40 bg-white dark:bg-gray-900">
        <div class="flex flex-col h-full p-4">
            <div class="flex justify-between items-center mb-8">
                <span class="text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent">AniVerse</span>
                <button id="mobile-menu-close" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="flex flex-col space-y-4">
                <a href="#" class="text-lg py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" onclick="navigate(event, 'home')">Accueil</a>
                <a href="#" class="text-lg py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" onclick="navigate(event, 'calendar')">Calendrier</a>
                <a href="#" class="text-lg py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" onclick="navigate(event, 'library')">Bibliothèque</a>
                <a href="#" class="text-lg py-2 px-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" onclick="navigate(event, 'news')">Actualités</a>
            </div>
            <div class="mt-auto">
                <div class="flex space-x-4">
                    <button id="mobile-theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>
                    <button class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                        <i class="fas fa-user"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Home Page -->
        <div id="home-page" class="page">
            <!-- Hero Section -->
            <section class="mb-12">
                <div class="relative rounded-xl overflow-hidden h-96">
                    <div class="absolute inset-0 bg-gradient-to-r from-gray-900 to-transparent z-10"></div>
                    <img src="https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Anime Hero" class="w-full h-full object-cover">
                    <div class="absolute bottom-0 left-0 z-20 p-8">
                        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Découvrez le monde des animés</h1>
                        <p class="text-xl text-gray-200 mb-6">Suivez vos animés préférés, découvrez les dernières sorties et rejoignez la communauté.</p>
                        <button class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">Explorer maintenant</button>
                    </div>
                </div>
            </section>

            <!-- Latest Releases -->
            <section class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Dernières sorties</h2>
                    <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline" onclick="navigate(event, 'library')">Voir tout</a>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" id="latest-releases">
                    <!-- Anime cards will be inserted here by JavaScript -->
                </div>
            </section>

            <!-- Popular Now -->
            <section class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Populaire en ce moment</h2>
                    <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline" onclick="navigate(event, 'library')">Voir tout</a>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" id="popular-now">
                    <!-- Anime cards will be inserted here by JavaScript -->
                </div>
            </section>

            <!-- Editor's Picks -->
            <section class="mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Nos coups de cœur</h2>
                    <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline" onclick="navigate(event, 'library')">Voir tout</a>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="editors-picks">
                    <!-- Featured anime cards will be inserted here by JavaScript -->
                </div>
            </section>
        </div>

        <!-- Calendar Page -->
        <div id="calendar-page" class="page hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Calendrier des sorties</h2>
                <div class="flex space-x-2">
                    <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-md">Semaine</button>
                    <button class="px-3 py-1 bg-primary-600 text-white rounded-md">Mois</button>
                    <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-md">Saison</button>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden">
                <div class="grid grid-cols-7 bg-gray-100 dark:bg-gray-700">
                    <div class="p-3 text-center font-medium">Lundi</div>
                    <div class="p-3 text-center font-medium">Mardi</div>
                    <div class="p-3 text-center font-medium">Mercredi</div>
                    <div class="p-3 text-center font-medium">Jeudi</div>
                    <div class="p-3 text-center font-medium">Vendredi</div>
                    <div class="p-3 text-center font-medium">Samedi</div>
                    <div class="p-3 text-center font-medium">Dimanche</div>
                </div>
                <div class="grid grid-cols-7">
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">12 Juin</div>
                        <div class="space-y-2" id="monday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">13 Juin</div>
                        <div class="space-y-2" id="tuesday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">14 Juin</div>
                        <div class="space-y-2" id="wednesday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">15 Juin</div>
                        <div class="space-y-2" id="thursday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">16 Juin</div>
                        <div class="space-y-2" id="friday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-r border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">17 Juin</div>
                        <div class="space-y-2" id="saturday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                    <div class="border-b border-gray-200 dark:border-gray-700 min-h-32 p-2">
                        <div class="text-sm font-medium mb-2">18 Juin</div>
                        <div class="space-y-2" id="sunday-releases">
                            <!-- Releases will be inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Library Page -->
        <div id="library-page" class="page hidden">
            <div class="mb-8">
                <h2 class="text-2xl font-bold mb-4">Bibliothèque des animés</h2>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div class="relative w-full md:w-96">
                        <input type="text" placeholder="Rechercher un animé..." class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-800">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <div class="flex space-x-2 overflow-x-auto pb-2">
                        <button class="px-3 py-1 bg-primary-600 text-white rounded-full text-sm">Tous</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Action</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Aventure</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Comédie</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Drame</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Fantasy</button>
                        <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm">Sci-Fi</button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4" id="anime-library">
                <!-- Anime cards will be inserted here by JavaScript -->
            </div>

            <div class="mt-8 flex justify-center">
                <button class="px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600">Charger plus</button>
            </div>
        </div>

        <!-- News Page -->
        <div id="news-page" class="page hidden">
            <h2 class="text-2xl font-bold mb-6">Actualités des animés</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="news-articles">
                <!-- News articles will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- Anime Detail Page -->
        <div id="anime-detail-page" class="page hidden">
            <!-- Content will be loaded dynamically by JavaScript -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">AniVerse</h3>
                    <p class="text-gray-600 dark:text-gray-400">Votre portail vers le monde des animés. Découvrez, suivez et partagez vos animés préférés.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Navigation</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400" onclick="navigate(event, 'home')">Accueil</a></li>
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400" onclick="navigate(event, 'calendar')">Calendrier</a></li>
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400" onclick="navigate(event, 'library')">Bibliothèque</a></li>
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400" onclick="navigate(event, 'news')">Actualités</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Légal</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400">Conditions d'utilisation</a></li>
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400">Politique de confidentialité</a></li>
                        <li><a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400">Mentions légales</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Nous suivre</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"><i class="fab fa-twitter text-xl"></i></a>
                        <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"><i class="fab fa-facebook text-xl"></i></a>
                        <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"><i class="fab fa-instagram text-xl"></i></a>
                        <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"><i class="fab fa-discord text-xl"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700 text-center text-gray-500 dark:text-gray-400">
                <p>© 2023 AniVerse. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="login-modal" class="hidden fixed inset-0 z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="flex justify-between items-start">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white">Connexion</h3>
                        <button id="close-login-modal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="mt-4">
                        <div class="mb-4">
                            <label for="login-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                            <input type="email" id="login-email" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700">
                        </div>
                        <div class="mb-4">
                            <label for="login-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Mot de passe</label>
                            <input type="password" id="login-password" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700">
                        </div>
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded">
                                <label for="remember-me" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">Se souvenir de moi</label>
                            </div>
                            <a href="#" class="text-sm text-primary-600 dark:text-primary-400 hover:underline">Mot de passe oublié?</a>
                        </div>
                    </div>
                </div>
                <div class="px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm">Se connecter</button>
                    <button type="button" id="cancel-login" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">Annuler</button>
                </div>
                <div class="px-4 py-3 bg-gray-50 dark:bg-gray-700 sm:px-6 text-center">
                    <p class="text-sm text-gray-600 dark:text-gray-300">Pas encore de compte? <a href="#" class="text-primary-600 dark:text-primary-400 hover:underline">S'inscrire</a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data for the anime website
        const animeData = [
            {
                id: 1,
                title: "Attack on Titan: Final Season",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Drama", "Fantasy"],
                rating: 4.9,
                status: "En cours",
                episodes: 28,
                nextEpisode: "2023-06-18",
                description: "La guerre pour Paradis s'intensifie alors que Eren met en œuvre son plan radical. Les anciens alliés deviennent des ennemis dans ce final explosif.",
                studio: "MAPPA",
                year: 2020,
                isPopular: true,
                isLatest: true,
                isEditorPick: true
            },
            {
                id: 2,
                title: "Demon Slayer: Kimetsu no Yaiba",
                image: "https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Supernatural", "Historical"],
                rating: 4.8,
                status: "Terminé",
                episodes: 26,
                nextEpisode: null,
                description: "Tanjiro Kamado devient un chasseur de démons après que sa famille ait été massacrée et sa sœur transformée en démon. Son voyage pour la venger commence.",
                studio: "ufotable",
                year: 2019,
                isPopular: true,
                isLatest: false,
                isEditorPick: true
            },
            {
                id: 3,
                title: "Jujutsu Kaisen",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Supernatural", "Horror"],
                rating: 4.7,
                status: "En cours",
                episodes: 24,
                nextEpisode: "2023-06-16",
                description: "Yuji Itadori avale un doigt maudit pour sauver ses amis et devient l'hôte d'une puissante malédiction. Il rejoint une organisation occulte pour combattre les malédictions.",
                studio: "MAPPA",
                year: 2020,
                isPopular: true,
                isLatest: true,
                isEditorPick: false
            },
            {
                id: 4,
                title: "Spy x Family",
                image: "https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Comedy", "Slice of Life"],
                rating: 4.8,
                status: "En cours",
                episodes: 25,
                nextEpisode: "2023-06-17",
                description: "Un esprit doit créer une famille factice pour infiltrer une école d'élite. Sans le savoir, il épouse une tueuse à gages et adopte une enfant télépathe.",
                studio: "Wit Studio, CloverWorks",
                year: 2022,
                isPopular: true,
                isLatest: true,
                isEditorPick: true
            },
            {
                id: 5,
                title: "Chainsaw Man",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Horror", "Supernatural"],
                rating: 4.6,
                status: "Terminé",
                episodes: 12,
                nextEpisode: null,
                description: "Denji fusionne avec son chien-démon Chainsaw et rejoint une organisation de chasseurs de démons pour rembourser ses dettes et vivre une vie normale.",
                studio: "MAPPA",
                year: 2022,
                isPopular: true,
                isLatest: false,
                isEditorPick: false
            },
            {
                id: 6,
                title: "Vinland Saga",
                image: "https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Historical", "Drama"],
                rating: 4.7,
                status: "En cours",
                episodes: 24,
                nextEpisode: "2023-06-15",
                description: "Thorfinn, un jeune guerrier viking, cherche à venger la mort de son père tout en naviguant dans les complexités de la guerre et de la paix.",
                studio: "Wit Studio",
                year: 2019,
                isPopular: false,
                isLatest: true,
                isEditorPick: true
            },
            {
                id: 7,
                title: "My Hero Academia",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Action", "Superhero", "School"],
                rating: 4.5,
                status: "En cours",
                episodes: 113,
                nextEpisode: "2023-06-14",
                description: "Izuku Midoriya, né sans pouvoir dans un monde où 80% de la population en possède, rêve de devenir un héros. Après avoir rencontré son idole All Might, il intègre la prestigieuse U.A. High School.",
                studio: "Bones",
                year: 2016,
                isPopular: true,
                isLatest: true,
                isEditorPick: false
            },
            {
                id: 8,
                title: "Death Note",
                image: "https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",
                genres: ["Mystery", "Psychological", "Supernatural"],
                rating: 4.9,
                status: "Terminé",
                episodes: 37,
                nextEpisode: null,
                description: "Light Yagami trouve un cahier surnaturel qui tue quiconque dont le nom est écrit dedans. Il commence une croisade pour éliminer les criminels, attirant l'attention d'un détective génial nommé L.",
                studio: "Madhouse",
                year: 2006,
                isPopular: false,
                isLatest: false,
                isEditorPick: true
            }
        ];

        const newsData = [
            {
                id: 1,
                title: "Nouvelle saison de One Piece annoncée pour 2024",
                excerpt: "Toei Animation a officiellement annoncé une nouvelle saison de One Piece qui débutera en avril 2024 avec une animation remastérisée.",
                date: "2023-06-10",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
            },
            {
                id: 2,
                title: "Le film Demon Slayer: Swordsmith Village Arc dépasse les 10 milliards de yens",
                excerpt: "Le dernier film Demon Slayer a dépassé les 10 milliards de yens au box-office japonais en seulement 3 semaines, devenant le film le plus rapide à atteindre ce chiffre en 2023.",
                date: "2023-06-05",
                image: "https://images.unsplash.com/photo-1633613286848-e6f43bbafb8d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
            },
            {
                id: 3,
                title: "Nouvel anime original de Makoto Shinkai en production",
                excerpt: "Le célèbre réalisateur Makoto Shinkai (Your Name, Weathering With You) travaille sur un nouveau film d'animation original dont la sortie est prévue pour l'été 2024.",
                date: "2023-05-28",
                image: "https://images.unsplash.com/photo-1633613286991-611fe299c4be?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
            }
        ];

        const calendarData = {
            "2023-06-12": [
                { animeId: 6, episode: 10, title: "Vinland Saga S2", time: "22:00" }
            ],
            "2023-06-14": [
                { animeId: 7, episode: 114, title: "My Hero Academia S6", time: "17:30" }
            ],
            "2023-06-15": [
                { animeId: 6, episode: 11, title: "Vinland Saga S2", time: "22:00" }
            ],
            "2023-06-16": [
                { animeId: 3, episode: 25, title: "Jujutsu Kaisen S1", time: "23:00" }
            ],
            "2023-06-17": [
                { animeId: 4, episode: 26, title: "Spy x Family S1", time: "18:00" }
            ],
            "2023-06-18": [
                { animeId: 1, episode: 29, title: "Attack on Titan Final", time: "20:45" }
            ]
        };

        // Utility functions
        function navigate(event, page) {
            event.preventDefault();
            document.querySelectorAll('.page').forEach(el => el.classList.add('hidden'));
            document.getElementById(`${page}-page`).classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function formatDate(dateString) {
            const options = { day: 'numeric', month: 'short' };
            return new Date(dateString).toLocaleDateString('fr-FR', options);
        }

        function createAnimeCard(anime, isLarge = false) {
            const card = document.createElement('div');
            card.className = `bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md card-hover ${isLarge ? '' : 'h-full'}`;
            card.innerHTML = `
                <div class="relative ${isLarge ? 'h-64' : 'h-48'}">
                    <img src="${anime.image}" alt="${anime.title}" class="w-full h-full object-cover">
                    <div class="absolute top-2 right-2 bg-primary-600 text-white text-xs font-bold px-2 py-1 rounded">
                        ${anime.rating.toFixed(1)} <i class="fas fa-star ml-1"></i>
                    </div>
                    ${anime.nextEpisode ? `
                    <div class="absolute bottom-2 left-2 bg-gray-900/80 text-white text-xs px-2 py-1 rounded">
                        Prochain épisode: ${formatDate(anime.nextEpisode)}
                    </div>` : ''}
                </div>
                <div class="p-4 ${isLarge ? '' : 'flex flex-col h-[calc(100%-12rem)]'}">
                    <h3 class="font-bold ${isLarge ? 'text-xl mb-2' : 'text-md mb-1 line-clamp-1'}">${anime.title}</h3>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${anime.genres.slice(0, 2).map(genre => `
                            <span class="text-xs bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded-full">${genre}</span>
                        `).join('')}
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 text-sm ${isLarge ? '' : 'line-clamp-2'}">${anime.description}</p>
                    ${isLarge ? `
                    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center">
                        <span class="text-sm">${anime.studio}</span>
                        <span class="text-sm">${anime.year}</span>
                    </div>
                    ` : ''}
                </div>
            `;
            card.addEventListener('click', () => showAnimeDetail(anime.id));
            return card;
        }

        function showAnimeDetail(animeId) {
            const anime = animeData.find(a => a.id === animeId);
            if (!anime) return;

            const detailPage = document.getElementById('anime-detail-page');
            detailPage.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden">
                    <div class="relative h-96 w-full">
                        <img src="${anime.image}" alt="${anime.title}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 p-6">
                            <h1 class="text-3xl font-bold text-white">${anime.title}</h1>
                            <div class="flex items-center mt-2">
                                <span class="bg-primary-600 text-white px-2 py-1 rounded-md text-sm font-bold mr-2">
                                    ${anime.rating.toFixed(1)} <i class="fas fa-star ml-1"></i>
                                </span>
                                <span class="text-gray-300 text-sm">${anime.year} • ${anime.studio}</span>
                            </div>
                        </div>
                        <button onclick="navigate(event, 'home')" class="absolute top-4 left-4 bg-gray-900/50 text-white p-2 rounded-full hover:bg-gray-900/70">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <button class="absolute top-4 right-4 bg-gray-900/50 text-white p-2 rounded-full hover:bg-gray-900/70">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                    
                    <div class="p-6">
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${anime.genres.map(genre => `
                                <span class="bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full text-sm">${genre}</span>
                            `).join('')}
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                                <div class="text-gray-500 dark:text-gray-400 text-sm">Statut</div>
                                <div class="font-medium">${anime.status}</div>
                            </div>
                            <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                                <div class="text-gray-500 dark:text-gray-400 text-sm">Épisodes</div>
                                <div class="font-medium">${anime.episodes}</div>
                            </div>
                            <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                                <div class="text-gray-500 dark:text-gray-400 text-sm">Studio</div>
                                <div class="font-medium">${anime.studio}</div>
                            </div>
                            <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg">
                                <div class="text-gray-500 dark:text-gray-400 text-sm">Année</div>
                                <div class="font-medium">${anime.year}</div>
                            </div>
                        </div>
                        
                        <h2 class="text-xl font-bold mb-2">Synopsis</h2>
                        <p class="text-gray-700 dark:text-gray-300 mb-6">${anime.description}</p>
                        
                        ${anime.nextEpisode ? `
                        <div class="bg-primary-50 dark:bg-primary-900/30 border border-primary-200 dark:border-primary-800 rounded-lg p-4 mb-6">
                            <div class="flex items-center">
                                <i class="fas fa-bell text-primary-600 dark:text-primary-400 mr-2"></i>
                                <span class="font-medium">Prochain épisode le ${formatDate(anime.nextEpisode)}</span>
                            </div>
                        </div>
                        ` : ''}
                        
                        <div class="mb-8">
                            <h2 class="text-xl font-bold mb-4">Bande-annonce</h2>
                            <div class="aspect-w-16 aspect-h-9 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden">
                                <div class="w-full h-64 md:h-96 flex items-center justify-center">
                                    <i class="fas fa-play-circle text-5xl text-gray-400"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <h2 class="text-xl font-bold mb-4">Où regarder</h2>
                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                                <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg flex items-center">
                                    <img src="https://via.placeholder.com/40x40" alt="Crunchyroll" class="w-8 h-8 rounded-full mr-2">
                                    <span>Crunchyroll</span>
                                </div>
                                <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg flex items-center">
                                    <img src="https://via.placeholder.com/40x40" alt="Netflix" class="w-8 h-8 rounded-full mr-2">
                                    <span>Netflix</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h2 class="text-xl font-bold mb-4">Commentaires</h2>
                            <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mb-4">
                                <div class="flex items-center mb-3">
                                    <img src="https://via.placeholder.com/40x40" alt="User" class="w-8 h-8 rounded-full mr-2">
                                    <div>
                                        <div class="font-medium">Jean Dupont</div>
                                        <div class="text-gray-500 dark:text-gray-400 text-sm">Il y a 2 jours</div>
                                    </div>
                                </div>
                                <p class="text-gray-700 dark:text-gray-300">Cet anime est tout simplement incroyable! L'animation, l'histoire, les personnages... tout est parfait.</p>
                            </div>
                            
                            <div class="mt-4">
                                <textarea class="w-full px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500" placeholder="Ajouter un commentaire..." rows="3"></textarea>
                                <button class="mt-2 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md font-medium">Publier</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners to the back button
            const backButton = detailPage.querySelector('button[onclick="navigate(event, \'home\')"]');
            if (backButton) {
                backButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    navigate(event, 'home');
                });
            }
            
            document.querySelectorAll('.page').forEach(el => el.classList.add('hidden'));
            detailPage.classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function createNewsCard(news) {
            const card = document.createElement('div');
            card.className = 'bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md card-hover';
            card.innerHTML = `
                <div class="h-48">
                    <img src="${news.image}" alt="${news.title}" class="w-full h-full object-cover">
                </div>
                <div class="p-4">
                    <div class="text-sm text-gray-500 dark:text-gray-400 mb-2">${new Date(news.date).toLocaleDateString('fr-FR')}</div>
                    <h3 class="font-bold text-lg mb-2 line-clamp-2">${news.title}</h3>
                    <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-3">${news.excerpt}</p>
                    <button class="mt-4 text-primary-600 dark:text-primary-400 text-sm font-medium hover:underline">Lire la suite</button>
                </div>
            `;
            return card;
        }

        function createCalendarItem(release) {
            const item = document.createElement('div');
            item.className = 'bg-gray-100 dark:bg-gray-700 p-2 rounded-md text-sm';
            item.innerHTML = `
                <div class="font-medium">${release.title}</div>
                <div class="text-gray-600 dark:text-gray-400">Ep. ${release.episode} • ${release.time}</div>
            `;
            item.addEventListener('click', () => {
                const anime = animeData.find(a => a.id === release.animeId);
                if (anime) showAnimeDetail(anime.id);
            });
            return item;
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
            
            function toggleTheme() {
                if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                }
            }
            
            themeToggle.addEventListener('click', toggleTheme);
            mobileThemeToggle.addEventListener('click', toggleTheme);
            
            // Mobile menu
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.remove('hidden');
            });
            
            mobileMenuClose.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
            
            // Search toggle
            const searchToggle = document.getElementById('search-toggle');
            const searchDropdown = document.getElementById('search-dropdown');
            
            searchToggle.addEventListener('click', () => {
                searchDropdown.classList.toggle('hidden');
            });
            
            // Login modal
            const userMenuButton = document.getElementById('user-menu-button');
            const loginModal = document.getElementById('login-modal');
            const closeLoginModal = document.getElementById('close-login-modal');
            const cancelLogin = document.getElementById('cancel-login');
            
            userMenuButton.addEventListener('click', () => {
                loginModal.classList.remove('hidden');
            });
            
            closeLoginModal.addEventListener('click', () => {
                loginModal.classList.add('hidden');
            });
            
            cancelLogin.addEventListener('click', () => {
                loginModal.classList.add('hidden');
            });
            
            // Populate anime sections
            const latestReleasesContainer = document.getElementById('latest-releases');
            const popularNowContainer = document.getElementById('popular-now');
            const editorsPicksContainer = document.getElementById('editors-picks');
            const animeLibraryContainer = document.getElementById('anime-library');
            const newsContainer = document.getElementById('news-articles');
            
            // Latest releases (last 3 months)
            animeData
                .filter(anime => anime.isLatest)
                .slice(0, 5)
                .forEach(anime => {
                    latestReleasesContainer.appendChild(createAnimeCard(anime));
                });
            
            // Popular now (highest rating)
            animeData
                .filter(anime => anime.isPopular)
                .sort((a, b) => b.rating - a.rating)
                .slice(0, 5)
                .forEach(anime => {
                    popularNowContainer.appendChild(createAnimeCard(anime));
                });
            
            // Editor's picks
            animeData
                .filter(anime => anime.isEditorPick)
                .forEach(anime => {
                    editorsPicksContainer.appendChild(createAnimeCard(anime, true));
                });
            
            // Anime library
            animeData.forEach(anime => {
                animeLibraryContainer.appendChild(createAnimeCard(anime));
            });
            
            // News articles
            newsData.forEach(news => {
                newsContainer.appendChild(createNewsCard(news));
            });
            
            // Calendar releases
            Object.entries(calendarData).forEach(([date, releases]) => {
                const day = new Date(date).getDay();
                let dayId;
                
                switch(day) {
                    case 0: dayId = 'sunday-releases'; break;
                    case 1: dayId = 'monday-releases'; break;
                    case 2: dayId = 'tuesday-releases'; break;
                    case 3: dayId = 'wednesday-releases'; break;
                    case 4: dayId = 'thursday-releases'; break;
                    case 5: dayId = 'friday-releases'; break;
                    case 6: dayId = 'saturday-releases'; break;
                }
                
                const dayContainer = document.getElementById(dayId);
                if (dayContainer) {
                    releases.forEach(release => {
                        dayContainer.appendChild(createCalendarItem(release));
                    });
                }
            });
            
            // Show home page by default
            document.getElementById('home-page').classList.remove('hidden');
        });

        // Make navigate function available globally
        window.navigate = navigate;
    </script>
</body>
</html>
